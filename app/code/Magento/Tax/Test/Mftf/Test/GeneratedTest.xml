<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="CreateTaxRateEntityTestVariation1">
        <annotations>
            <features value="Tax"/>
            <title value="Create Tax Rate"/>
            <description value="Create Tax Rate"/>
            <testCaseId value="MAGETWO-23286"/>
            <severity value="CRITICAL"/>
            <group value="mtf_migrated"/>
            <group value="banana"/>
        </annotations>

        <magentoCLI command="indexer:reindex" stepKey="reindex"/>
        <!--<seeElement selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-header ')]/descendant-or-self::*/*[@class and contains(concat(' ', normalize-space(@class), ' '), ' admin-user ')]" stepKey="stepNumber0" />-->
        <amOnPage url="admin/admin/auth/login" stepKey="stepNumber1"/>
        <!--<seeElement selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-header ')]/descendant-or-self::*/*[@class and contains(concat(' ', normalize-space(@class), ' '), ' admin-user ')]" stepKey="stepNumber2" />-->
        <fillField selector="//*[@id = 'login-form']//*[@id = 'username']" userInput="admin" stepKey="stepNumber3"/>
        <fillField selector="//*[@id = 'login-form']//*[@id = 'login']" userInput="123123q" stepKey="stepNumber4"/>
        <click selector="//*[@id = 'login-form']//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' action-login ')]" stepKey="stepNumber5"/>
        <seeElement selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-header ')]/descendant-or-self::*/*[@class and contains(concat(' ', normalize-space(@class), ' '), ' admin-user ')]" stepKey="stepNumber6" />
        <amOnPage url="http://magento2.vagrant74/admin/tax/rate/index" stepKey="stepNumber7"/>
        <click selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-main-actions ')]//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' add-tax-rate ')]" stepKey="stepNumber8"/>
        <fillField selector="//*[@id = 'rate-form']//*[@name = 'code']" userInput="TaxIdentifier1874023406" stepKey="stepNumber9"/>
        <fillField selector="//*[@id = 'rate-form']//*[@name = 'tax_postcode']" userInput="*" stepKey="stepNumber10"/>
        <click selector="//*[@id = 'rate-form']//*[@name = 'tax_country_id']//option[contains(normalize-space(.), 'Australia')]" stepKey="stepNumber11"/>
        <fillField selector="//*[@id = 'rate-form']//*[@name = 'rate']" userInput="20" stepKey="stepNumber12"/>
        <seeElement selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' save-rate ')]" stepKey="stepNumber13" />
        <click selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-main-actions ')]//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' save-rate ')]" stepKey="stepNumber14"/>
        <waitForPageLoad stepKey="stepNumber15" />
        <seeElement selector="//ancestor::body/div[@data-role='loader']" stepKey="stepNumber16" />
        <seeElement selector="//ancestor::body/div[@id='loading-mask']" stepKey="stepNumber17" />
        <seeElement selector="//*[@data-ui-id and substring(@data-ui-id, string-length(@data-ui-id)-14) = 'message-success']" stepKey="stepNumber18" />
        <seeElement selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-header ')]/descendant-or-self::*/*[@class and contains(concat(' ', normalize-space(@class), ' '), ' admin-user ')]" stepKey="stepNumber19" />
        <amOnPage url="http://magento2.vagrant74/admin/tax/rate/index" stepKey="stepNumber20"/>
        <waitForPageLoad stepKey="stepNumber21" />
        <waitForPageLoad stepKey="stepNumber22" />
        <waitForPageLoad stepKey="stepNumber23" />
        <waitForPageLoad stepKey="stepNumber24" />
        <waitForPageLoad stepKey="stepNumber25" />
        <waitForPageLoad stepKey="stepNumber26" />
        <waitForPageLoad stepKey="stepNumber27" />
        <waitForPageLoad stepKey="stepNumber28" />
        <conditionalClick selector="{{AdminDataGridHeaderSection.clearFilters}}" dependentSelector="{{AdminDataGridHeaderSection.clearFilters}}" visible="true" stepKey="stepNumber29"/>
        <waitForPageLoad stepKey="stepNumber30" />
        <waitForPageLoad stepKey="stepNumber31" />
        <waitForPageLoad stepKey="stepNumber32" />
        <waitForPageLoad stepKey="stepNumber33" />
        <fillField selector="//*[@id = 'tax_rate_grid']//*[@id = 'tax_rate_grid_filter_code']" userInput="TaxIdentifier1874023406" stepKey="stepNumber34"/>
        <click selector="//*[@id = 'tax_rate_grid']//*[@id = 'tax_rate_grid_filter_tax_country_id']//option[contains(normalize-space(.), 'Australia')]" stepKey="stepNumber35"/>
        <fillField selector="//*[@id = 'tax_rate_grid']//*[@id = 'tax_rate_grid_filter_tax_postcode']" userInput="*" stepKey="stepNumber36"/>
        <click selector="//*[@id = 'tax_rate_grid']//*[@data-action = 'grid-filter-apply']" stepKey="stepNumber37"/>
        <waitForPageLoad stepKey="stepNumber38" />
        <waitForPageLoad stepKey="stepNumber39" />
        <waitForPageLoad stepKey="stepNumber40" />
        <waitForPageLoad stepKey="stepNumber41" />
        <seeElement selector="//*[@id = 'tax_rate_grid']//tbody/tr[td[text()[normalize-space()='TaxIdentifier1874023406']] and td[text()[normalize-space()='Australia']] and td[text()[normalize-space()='*']]]" stepKey="stepNumber42" />
        <seeElement selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-header ')]/descendant-or-self::*/*[@class and contains(concat(' ', normalize-space(@class), ' '), ' admin-user ')]" stepKey="stepNumber43" />
        <amOnPage url="http://magento2.vagrant74/admin/tax/rate/index" stepKey="stepNumber44"/>
        <waitForPageLoad stepKey="stepNumber45" />
        <waitForPageLoad stepKey="stepNumber46" />
        <waitForPageLoad stepKey="stepNumber47" />
        <waitForPageLoad stepKey="stepNumber48" />
        <conditionalClick selector="{{AdminDataGridHeaderSection.clearFilters}}" dependentSelector="{{AdminDataGridHeaderSection.clearFilters}}" visible="true" stepKey="stepNumber49"/>
        <waitForPageLoad stepKey="stepNumber50" />
        <waitForPageLoad stepKey="stepNumber51" />
        <waitForPageLoad stepKey="stepNumber52" />
        <waitForPageLoad stepKey="stepNumber53" />
        <fillField selector="//*[@id = 'tax_rate_grid']//*[@id = 'tax_rate_grid_filter_code']" userInput="TaxIdentifier1874023406" stepKey="stepNumber54"/>
        <click selector="//*[@id = 'tax_rate_grid']//*[@data-action = 'grid-filter-apply']" stepKey="stepNumber55"/>
        <waitForPageLoad stepKey="stepNumber56" />
        <waitForPageLoad stepKey="stepNumber57" />
        <waitForPageLoad stepKey="stepNumber58" />
        <waitForPageLoad stepKey="stepNumber59" />
        <seeElement selector="//*[@id = 'tax_rate_grid']//tbody/tr[td[text()[normalize-space()='TaxIdentifier1874023406']]]" stepKey="stepNumber60" />
        <click selector="//*[@id = 'tax_rate_grid']//tbody/tr[td[text()[normalize-space()='TaxIdentifier1874023406']]]//td[@class and contains(@class, 'col-code')]" stepKey="stepNumber61"/>
        <waitForPageLoad stepKey="stepNumber62" />
        <waitForPageLoad stepKey="stepNumber63" />
        <waitForPageLoad stepKey="stepNumber64" />
        <waitForPageLoad stepKey="stepNumber65" />
        <seeElement selector="//*[@id = 'rate-form']//*[@name = 'tax_country_id']//option[(@checked and (name(.) = 'input' or name(.) = 'command')and (@type = 'checkbox' or @type = 'radio'))]" stepKey="stepNumber66" />
        <seeElement selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-header ')]/descendant-or-self::*/*[@class and contains(concat(' ', normalize-space(@class), ' '), ' admin-user ')]" stepKey="stepNumber67" />
        <amOnPage url="http://magento2.vagrant74/admin/tax/rule/index" stepKey="stepNumber68"/>
        <click selector="//*[@class and contains(concat(' ', normalize-space(@class), ' '), ' page-main-actions ')]//*[@id = 'add']" stepKey="stepNumber69"/>
        <seeElement selector="//*[@class and contains(@class, 'tax_rate')]/descendant-or-self::*/*[(@class and contains(concat(' ', normalize-space(@class), ' '), ' block ')) and (@class and contains(concat(' ', normalize-space(@class), ' '), ' mselect-list '))]/descendant-or-self::*/*[@class and contains(concat(' ', normalize-space(@class), ' '), ' mselect-items-wrapper ')]" stepKey="stepNumber70" />
        <seeElement selector="//*[@id = 'edit_form']//*[@class and contains(@class, 'tax_rate')]//*[contains(@class,'mselect-list-item')]/label[contains(normalize-space(.), 'TaxIdentifier1874023406')]" stepKey="stepNumber71" />

    </test>
</tests>
